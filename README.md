# News Report

You can find the report of three questions related to the news dataset.

## How to run the app?

You just need to set up Python and Flask. Make sure port 8000 is available and then run `python news.py`. Then go to your browser and go to `localhost:8000`.

## What you can find in this report?

You will find the report on three questions:
* What are the most popular three articles of all time?

* Who are the most popular article authors of all time? 

* On which days did more than 1% of requests lead to errors?

## How this report is generated?

### Question 1:

`select A.title, B.num as views
 from articles as A
 JOIN (Select split_part(path,'/',3) as title, count(*) AS num
   from log where status like '%OK%'
   group by path
   order by num desc limit 4) as B
 on A.slug = B.title order by views desc;`
 
 
 ### Question 2:
 
 `select A.name, T.sum_views
  from authors as A join (select author, sum(views) as sum_views
    from top_articles
    group by author
    order by sum_views) as T
   on A.id = T.author
   order by T.sum_views desc limit 3;`
   
 `top_articles` is a view generated by this query:
 
 `create view top_articles as select A.author, A.title, B.num as views from articles as A JOIN (Select split_part(path,'/',3) as title, count(*) AS num from log where status like '%OK%' group by path order by num desc limit 9) as B on A.slug = B.title order by views desc;`
 
 ### Question 3:
 
 `select * from (
    select to_char(date_trunc('day',time),'Mon DD, YYYY') as date_only,
    round((100.0 * sum(case when status like '%404%' then 1 else 0 end)) / count(*),2)
    from log group by date_only) as t
  where round > 1;`

